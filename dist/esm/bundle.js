import t,{useState as e}from"react";var i;"function"==typeof SuppressedError&&SuppressedError,function(t){t.Density="density",t.Resolution="resolution"}(i||(i={}));const a=({id:t,quality:e,format:i,width:a,dpr:o,blur:r,aspectRatio:s,cloudName:n,apiVersion:l})=>`https://res.cloudinary.com/${n}/image/upload/q_${e},f_${i}${s?",c_fill":""},w_${a}${s?`,ar_${s}`:""}${o?`,dpr_${o}`:""}${r?`,e_blur:${r}`:""}/v${l}/${t}`,o=({id:t,quality:e,sizesArr:o,format:r,switching:s,aspectRatio:n,apiVersion:l,cloudName:c})=>{if(s===i.Resolution){const i={};return o.map((o=>`${a(Object.assign(Object.assign({id:t,quality:e,format:r,width:o.width,aspectRatio:n},i),{apiVersion:l,cloudName:c}))} ${o.width}w`)).join(", ")}return`${a({id:t,quality:e,format:r,width:o[o.length-1].width,aspectRatio:n,apiVersion:l,cloudName:c})} 1x, ${a({id:t,quality:e,format:r,width:o[o.length-1].width,aspectRatio:n,dpr:2,apiVersion:l,cloudName:c})} 2x,  ${a({id:t,quality:e,format:r,width:o[o.length-1].width,aspectRatio:n,dpr:3,apiVersion:l,cloudName:c})} 3x`},r=t=>[0,-1].includes(t.lastIndexOf("px"))||t.lastIndexOf("px")!==t.length-2?null:t.trim(),s=t=>parseInt(t.trim().substring(0,t.length-2),10),n=t=>{const e=r(t);if(null===e)return null;const i=e.split(")");if(1===i.length){const t=s(e);return t?{query:"*",width:t}:null}if(-1===i[0].indexOf("(")||!i[1])return null;const a=r(i[1]);if(null===a)return null;const o=s(a);return o?{query:`${i[0]})`,width:o}:null},l=r=>{var{src:s,width:l,height:c,alt:d,priority:u,className:p,placeholderClassName:h,quality:m,sizes:f,switching:y,notResponsive:g,style:w,onLoaded:b,aspectRatio:O,dataIndex:$,cloudName:N,apiVersion:R}=r,q=function(t,e){var i={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(i[a]=t[a]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(t);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(t,a[o])&&(i[a[o]]=t[a[o]])}return i}(r,["src","width","height","alt","priority","className","placeholderClassName","quality","sizes","switching","notResponsive","style","onLoaded","aspectRatio","dataIndex","cloudName","apiVersion"]);const[x,j]=e(!1),v=(t=>{const e=t.trim(),i=e.split(",");if(!i.length){const t=n(e);return t?[t]:null}const a=[];for(const t of i){const e=n(t);if(!e)return null;a.push(e)}return a})(f);if(!v)throw new Error("Sizes attribute is not valid");const V=o({id:s,quality:m,sizesArr:v,format:"avif",switching:y,aspectRatio:O,cloudName:N,apiVersion:R}),z=o({id:s,quality:m,sizesArr:v,format:"webp",switching:y,aspectRatio:O,apiVersion:R,cloudName:N}),E=l/c,S=y===i.Resolution?{sizes:f}:{},_=v[v.length-1].width,I=Math.round(_/E),A=g?{flexShrink:0}:{},L=$?{"data-index":$}:{},P=p?{className:p}:{},C={};x&&(C.display="none");const k={opacity:0};return x&&(k.opacity=1),t.createElement("div",Object.assign({},P,{style:Object.assign(Object.assign(Object.assign({},A),w),{position:"relative",overflow:"hidden"})},L),t.createElement("img",{src:a({id:s,quality:"auto",format:"auto",width:100,aspectRatio:O,blur:1e3,apiVersion:R,cloudName:N}),width:_,height:I,className:h,loading:u?"eager":"lazy",fetchpriority:u?"high":"low",alt:d,style:Object.assign({position:"absolute",inset:0},C)}),t.createElement("picture",{onLoad:()=>{j(!0),b&&$&&b($)}},t.createElement("source",Object.assign({type:"image/avif",srcSet:V},S)),t.createElement("img",Object.assign({srcSet:z,src:a({id:s,quality:m,format:"webp",width:_,aspectRatio:O,apiVersion:R,cloudName:N}),alt:d,width:_,height:I,loading:u?"eager":"lazy",fetchpriority:u?"high":"low",style:k},S,q))))};export{l as Image,i as Switching};
//# sourceMappingURL=bundle.js.map
